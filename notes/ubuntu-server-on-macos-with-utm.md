# 在 macOS 用 UTM 安裝 Ubuntu Server 的教學

在 macOS 上使用 UTM 安裝 Ubuntu Server 是一個簡單且方便的方法，可以在不影響主機系統的情況下，體驗和測試 Ubuntu Server 的功能。以下是詳細的安裝教學。

## 前置準備

1. **下載 UTM**
   - 前往 [UTM 官方網站](https://mac.getutm.app/) 下載最新版本的 UTM。
   - 安裝 UTM 後，打開 UTM 應用程式。

2. **下載 Ubuntu Server ISO for ARM 映像**
   - 前往 [Ubuntu 官方網站](https://ubuntu.com/download/server/arm) 下載最新的 Ubuntu Server ARM 版本（一般為 ISO 檔案）。

## 安裝步驟

### 1. 創建虛擬機
   - 打開 UTM，點擊「+」按鈕以創建新虛擬機。
   - 選擇「虛擬化 (Virtualize)」，這樣可以利用 Mac 的硬體加速來提升虛擬機的效能（前提是使用基於 Apple Silicon 的 Mac，如 M1/M2 系列）。
   - 點選「Linux/其他」，然後點擊「繼續」。

### 2. 設定 Ubuntu Server 的 ISO
   - 在「磁碟映像」頁面中，選擇「瀏覽」並選取先前下載的 Ubuntu Server ISO 檔案。
   - 點擊「繼續」。

### 3. 配置虛擬機設定
   - **CPU**: 根據 Mac 的性能，建議選擇 2 個或以上的 CPU 核心。
   - **記憶體**: 建議至少配置 2GB 的記憶體（2048MB），可以根據需求增加記憶體容量。
   - 點擊「繼續」。

### 4. 設置虛擬硬碟
   - UTM 會自動創建一個虛擬硬碟，建議選擇 20GB 或更大（根據需要調整）。
   - 點擊「繼續」並選擇「創建」。

### 5. 其他設置
   - **網路**: 選擇「仿真網卡」，這樣可以讓虛擬機與 Mac 共享網路。
   - **音效**: 因為是 Server 版，可以忽略音效設置。
   - **顯示卡**: 設定為默認即可。

### 6. 開始安裝
   - 點擊「儲存」以完成虛擬機設置，然後選擇剛創建的虛擬機並點擊「啟動」。
   - 虛擬機啟動後，會自動從 ISO 開始啟動 Ubuntu Server 的安裝程式。

## 安裝 Ubuntu Server

### 1. 選擇語言和鍵盤配置
   - 根據需要選擇語言（通常選擇 English），然後選擇鍵盤配置。

### 2. 設定網路
   - 通常虛擬機會自動偵測網路，直接點擊「繼續」即可。

### 3. 設定 Proxy（選擇性）
   - 如果沒有特別的 Proxy 需求，直接跳過這一步。

### 4. 設定 Ubuntu 鏡像源
   - 保持預設即可，按「繼續」。

### 5. 設定磁碟
   - 選擇「使用整個磁碟」來簡化設置。
   - 確認磁碟分區設置後，選擇「完成並寫入更改」。

### 6. 建立使用者帳戶
   - 設定伺服器名稱、使用者名稱及密碼。
   - 請務必記住設定的使用者名稱和密碼，以便日後登錄使用。

### 7. 安裝 OpenSSH 伺服器
   - 在「Features」頁面中，選擇「安裝 OpenSSH 伺服器」，這樣之後可以透過 SSH 連接到伺服器。

### 8. 開始安裝
   - 確認所有設置後，點擊「繼續」開始安裝。
   - 等待安裝完成後，系統會要求重新啟動。完成後即可進入 Ubuntu Server 的命令列界面。

## 後續步驟

1. **移除 ISO 檔案**
   - 安裝完成後，回到 UTM 的虛擬機設置，移除 ISO 檔案以免下次啟動時再次進入安裝程式。

2. **進行系統更新**
   - 登入後，輸入以下命令更新系統：
     ```bash
     sudo apt update
     sudo apt upgrade -y
     ```
   - 這樣可以確保你的 Ubuntu Server 是最新版本，具有最新的安全補丁。

3. **連接至 SSH**
   - 確認虛擬機的 IP 地址（可以使用 `ip a` 命令查看）。
   - 在 Mac 的終端機上使用以下命令連接到 Ubuntu Server：
     ```bash
     ssh your_username@your_server_ip
     ```
   - 輸入密碼後即可透過 SSH 遠端管理你的 Ubuntu Server。

## 結語

到此為止，你已經在 macOS 上成功透過 UTM 安裝並設置了 Ubuntu Server。這個虛擬機環境可以用來學習 Linux 系統管理、開發應用程式，甚至可以當作測試環境。透過 UTM，你可以輕鬆地在 macOS 上體驗到 Ubuntu Server 的強大功能。